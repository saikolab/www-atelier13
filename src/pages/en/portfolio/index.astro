---
// components
import Contact from "@components/Contact/Contact.astro";
import PortfolioGrid from "@components/Portfolio/PortfolioGrid.astro";
import TestimonialQuote from "@components/Testimonials/TestimonialQuote.astro";
// layout
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import { getLangFromUrl } from "@/i18n/utils";
import type { Locale } from "@/i18n/config";

const lang: Locale = getLangFromUrl(Astro.url);
const portfolios = await getCollection("portfolios", ({ data }) => {
	// only non-draft and matching language
	return data.draft !== true && (data as any).lang === lang;
});
---

<BaseLayout title="Portfolios" description="Portfolio page for my projects and work." lang={lang}>
	<div class="site-container pt-24 md:pt-36">
		<div class="mx-auto max-w-6xl text-center">
    <h1 class="h2 text-pretty uppercase">
        Elevated interiors designed for how you live and work.
    </h1>
		</div>
		<PortfolioGrid portfolios={portfolios} />
	</div>

	<TestimonialQuote />

	<Contact class="mt-12" />
</BaseLayout>
